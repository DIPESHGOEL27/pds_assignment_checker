/*
Name : Vankudoth Pavan
Department : Chemical Engineering
Roll No : 21CH10075
Package : Code blocks
Operating system : Windows
*/
#include <stdio.h>

int ** allocate(int rows, int cols)
{
    int ** ptr,i;
    ptr=(int **)malloc(rows*sizeof(int *));
    for (i=0;i<rows;i++){
        ptr[i]=(int *)malloc(cols*sizeof(int));
    }
    return ptr;
}

void read_data(int ** ptr, int rows, int cols)
{
    int i,j;
    printf("Enter the elements of the 2D array : \n");
    for (i=0;i<rows;i++){
        for(j=0;j<cols;j++){
            scanf("%d",&ptr[i][j]);
        }
    }
}

int is_saddle_type1(int ** ptr, int rows, int cols, int i, int j)
{
    int m;
    for (m=0;m<cols;m++){
        if (m!=j){
            if (ptr[i][m]>=ptr[i][j]) return 0;
        }
    }
    for (m=0;m<rows;m++){
        if (m!=i){
            if (ptr[m][j]<=ptr[i][j]) return 0;
        }
    }
    return 1;
}

int is_saddle_type2(int ** ptr, int rows, int cols, int i, int j)
{
    int m;
    for (m=0;m<cols;m++){
        if (m!=j){
            if (ptr[i][m]<=ptr[i][j]) return 0;
        }
    }
    for (m=0;m<rows;m++){
        if (m!=i){
            if (ptr[m][j]>=ptr[i][j]) return 0;
        }
    }
    return 1;
}

void saddle_points(int ** ptr, int rows, int cols)
{
    int i,j,count=0;
    for (i=0;i<rows;i++){
        for (j=0;j<cols;j++){
            if (is_saddle_type1(ptr,rows,cols,i,j) || is_saddle_type2(ptr,rows,cols,i,j) ) {printf("In the above array, a[%d][%d] = %d is a saddle point.\n",i,j,ptr[i][j]);count++;}
        }
    }
    if (count==0) printf("In the above array, there is no saddle point.");
    else if (count==1) printf("There is 1 saddle points in the above array.");
    else printf("There are %d saddle points in the above array.",count);
}

int main()
{
    int rows,cols,**data;
    printf("Enter the number of rows and columns : ");
    scanf("%d %d",&rows,&cols);
    data=allocate(rows,cols);
    read_data(data,rows,cols);
    saddle_points(data,rows,cols);
    free(data);
    return 0;
}
